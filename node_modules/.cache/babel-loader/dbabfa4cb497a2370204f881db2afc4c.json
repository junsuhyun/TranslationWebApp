{"remainingRequest":"D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\src\\lib\\translator.js","dependencies":[{"path":"D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\src\\lib\\translator.js","mtime":1617434216749},{"path":"D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2dldEl0ZXJhdG9yIGZyb20gIkQ6XFxQcm9ncmFtXFxjYXB0aW9uXFxjYXB0aW9uci1zdGF0aWMtd2ViLWFwcC1tYWluICgxKVxcY2FwdGlvbnItc3RhdGljLXdlYi1hcHAtbWFpblxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczIvY29yZS1qcy9nZXQtaXRlcmF0b3IiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDpcXFByb2dyYW1cXGNhcHRpb25cXGNhcHRpb25yLXN0YXRpYy13ZWItYXBwLW1haW4gKDEpXFxjYXB0aW9uci1zdGF0aWMtd2ViLWFwcC1tYWluXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMi9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmZ1bmN0aW9uLmJpbmQiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6XFxQcm9ncmFtXFxjYXB0aW9uXFxjYXB0aW9uci1zdGF0aWMtd2ViLWFwcC1tYWluICgxKVxcY2FwdGlvbnItc3RhdGljLXdlYi1hcHAtbWFpblxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczIvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkQ6XFxQcm9ncmFtXFxjYXB0aW9uXFxjYXB0aW9uci1zdGF0aWMtd2ViLWFwcC1tYWluICgxKVxcY2FwdGlvbnItc3RhdGljLXdlYi1hcHAtbWFpblxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczIvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgeyBBdWRpb0NvbmZpZywgU3BlZWNoVHJhbnNsYXRpb25Db25maWcsIFRyYW5zbGF0aW9uUmVjb2duaXplciwgUmVzdWx0UmVhc29uIH0gZnJvbSAnbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsnOwoKdmFyIFRyYW5zbGF0b3IgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBUcmFuc2xhdG9yKGNhbGxiYWNrKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVHJhbnNsYXRvcik7CgogICAgdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFjazsKICB9CgogIF9jcmVhdGVDbGFzcyhUcmFuc2xhdG9yLCBbewogICAga2V5OiAic3RhcnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0KG9wdGlvbnMpIHsKICAgICAgdmFyIGFscmVhZHlTdGFydGVkID0gISF0aGlzLl9yZWNvZ25pemVyOwoKICAgICAgaWYgKGFscmVhZHlTdGFydGVkKSB7CiAgICAgICAgdGhpcy5fcmVjb2duaXplci5zdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmMoKTsKICAgICAgfQoKICAgICAgdmFyIGF1ZGlvQ29uZmlnID0gQXVkaW9Db25maWcuZnJvbURlZmF1bHRNaWNyb3Bob25lSW5wdXQoKTsKICAgICAgdmFyIHNwZWVjaENvbmZpZyA9IFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnLmZyb21TdWJzY3JpcHRpb24ob3B0aW9ucy5rZXksIG9wdGlvbnMucmVnaW9uKTsKICAgICAgc3BlZWNoQ29uZmlnLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UgPSBvcHRpb25zLmZyb21MYW5ndWFnZTsKICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTsKICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfZ2V0SXRlcmF0b3Iob3B0aW9ucy50b0xhbmd1YWdlcyksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHsKICAgICAgICAgIHZhciBsYW5nID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICBzcGVlY2hDb25maWcuYWRkVGFyZ2V0TGFuZ3VhZ2UobGFuZyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7CiAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuICE9IG51bGwpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpOwogICAgICAgICAgfQogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHsKICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLl9yZWNvZ25pemVyID0gbmV3IFRyYW5zbGF0aW9uUmVjb2duaXplcihzcGVlY2hDb25maWcsIGF1ZGlvQ29uZmlnKTsKICAgICAgdGhpcy5fcmVjb2duaXplci5yZWNvZ25pemluZyA9IHRoaXMuX3JlY29nbml6ZXIucmVjb2duaXplZCA9IHJlY29nbml6ZXJDYWxsYmFjay5iaW5kKHRoaXMpOwoKICAgICAgdGhpcy5fcmVjb2duaXplci5zdGFydENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKCk7CgogICAgICBmdW5jdGlvbiByZWNvZ25pemVyQ2FsbGJhY2soX3gsIF94MikgewogICAgICAgIHJldHVybiBfcmVjb2duaXplckNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIF9yZWNvZ25pemVyQ2FsbGJhY2soKSB7CiAgICAgICAgX3JlY29nbml6ZXJDYWxsYmFjayA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHMsIGUpIHsKICAgICAgICAgIHZhciByZXN1bHQsIHJlYXNvbiwgY2FwdGlvbnMsIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yLCBfZGlkSXRlcmF0b3JFcnJvcjIsIF9pdGVyYXRvckVycm9yMiwgX2l0ZXJhdG9yMiwgX3N0ZXAyLCBfbGFuZywgbGFuZ0NvZGUsIGNhcHRpb247CgogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICByZXN1bHQgPSBlLnJlc3VsdDsKICAgICAgICAgICAgICAgICAgcmVhc29uID0gUmVzdWx0UmVhc29uW3Jlc3VsdC5yZWFzb25dOwoKICAgICAgICAgICAgICAgICAgaWYgKCEocmVhc29uICE9PSAnVHJhbnNsYXRpbmdTcGVlY2gnICYmIHJlYXNvbiAhPT0gJ1RyYW5zbGF0ZWRTcGVlY2gnKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgIGNhcHRpb25zID0gewogICAgICAgICAgICAgICAgICAgIG9mZnNldDogcmVzdWx0Lm9mZnNldCwKICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZXM6IHt9CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIGNhcHRpb25zLmxhbmd1YWdlc1tnZXRMYW5ndWFnZUNvZGUob3B0aW9ucy5mcm9tTGFuZ3VhZ2UpXSA9IHJlc3VsdC50ZXh0OwogICAgICAgICAgICAgICAgICBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWU7CiAgICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvcjIgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5OwoKICAgICAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IyID0gX2dldEl0ZXJhdG9yKG9wdGlvbnMudG9MYW5ndWFnZXMpOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgX2xhbmcgPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgbGFuZ0NvZGUgPSBnZXRMYW5ndWFnZUNvZGUoX2xhbmcpOwogICAgICAgICAgICAgICAgICAgIGNhcHRpb24gPSByZXN1bHQudHJhbnNsYXRpb25zLmdldChsYW5nQ29kZSk7CiAgICAgICAgICAgICAgICAgICAgY2FwdGlvbnMubGFuZ3VhZ2VzW2xhbmdDb2RlXSA9IGNhcHRpb247CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEzOwogICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDkpOwogICAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlOwogICAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvcjIgPSBfY29udGV4dC50MDsKCiAgICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTc7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxODsKCiAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4gIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIucmV0dXJuKCk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjA7CgogICAgICAgICAgICAgICAgICBpZiAoIV9kaWRJdGVyYXRvckVycm9yMikgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyOwoKICAgICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5maW5pc2goMjApOwoKICAgICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5maW5pc2goMTcpOwoKICAgICAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyNzsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrKHsKICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbDogcmVzdWx0LnRleHQsCiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb25zOiBjYXB0aW9ucwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUsIHRoaXMsIFtbOSwgMTMsIDE3LCAyNV0sIFsxOCwsIDIwLCAyNF1dKTsKICAgICAgICB9KSk7CiAgICAgICAgcmV0dXJuIF9yZWNvZ25pemVyQ2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZ2V0TGFuZ3VhZ2VDb2RlKGxhbmcpIHsKICAgICAgICByZXR1cm4gbGFuZy5zdWJzdHJpbmcoMCwgMik7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdG9wIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wKCkgewogICAgICBpZiAodGhpcy5fcmVjb2duaXplcikgewogICAgICAgIHRoaXMuX3JlY29nbml6ZXIuc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKHN0b3BSZWNvZ25pemVyLmJpbmQodGhpcyksIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIHN0b3BSZWNvZ25pemVyKCkuYmluZCh0aGlzKTsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgICB9LmJpbmQodGhpcykpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBzdG9wUmVjb2duaXplcigpIHsKICAgICAgICB0aGlzLl9yZWNvZ25pemVyLmNsb3NlKCk7CgogICAgICAgIHRoaXMuX3JlY29nbml6ZXIgPSB1bmRlZmluZWQ7CiAgICAgICAgY29uc29sZS5sb2coJ3N0b3BwZWQnKTsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIFRyYW5zbGF0b3I7Cn0oKTsKCmV4cG9ydCBkZWZhdWx0IFRyYW5zbGF0b3I7"},{"version":3,"sources":["D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\src\\lib\\translator.js"],"names":["AudioConfig","SpeechTranslationConfig","TranslationRecognizer","ResultReason","Translator","callback","_callback","options","alreadyStarted","_recognizer","stopContinuousRecognitionAsync","audioConfig","fromDefaultMicrophoneInput","speechConfig","fromSubscription","key","region","speechRecognitionLanguage","fromLanguage","toLanguages","lang","addTargetLanguage","recognizing","recognized","recognizerCallback","bind","startContinuousRecognitionAsync","s","e","result","reason","captions","offset","languages","getLanguageCode","text","langCode","caption","translations","get","original","substring","stopRecognizer","err","console","error","close","undefined","log"],"mappings":"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","sourcesContent":["import { \n  AudioConfig, SpeechTranslationConfig, TranslationRecognizer, ResultReason \n} from 'microsoft-cognitiveservices-speech-sdk'\n\nclass Translator {\n  constructor(callback) {\n    this._callback = callback\n  }\n\n  start(options) {\n    const alreadyStarted = !!this._recognizer\n    if (alreadyStarted) {\n      this._recognizer.stopContinuousRecognitionAsync()\n    }\n\n    const audioConfig = AudioConfig.fromDefaultMicrophoneInput()\n    const speechConfig = SpeechTranslationConfig.fromSubscription(options.key, options.region)\n\n    speechConfig.speechRecognitionLanguage = options.fromLanguage\n    for (const lang of options.toLanguages) {\n      speechConfig.addTargetLanguage(lang)\n    }\n\n    this._recognizer = new TranslationRecognizer(speechConfig, audioConfig)\n    this._recognizer.recognizing = this._recognizer.recognized = recognizerCallback.bind(this)\n    this._recognizer.startContinuousRecognitionAsync()\n\n    async function recognizerCallback(s, e) {\n      const result = e.result\n      const reason = ResultReason[result.reason]\n      if (reason !== 'TranslatingSpeech' && reason !== 'TranslatedSpeech') {\n        return\n      }\n\n      const captions = {\n        offset: result.offset,\n        languages: {}\n      }\n      captions.languages[getLanguageCode(options.fromLanguage)] = result.text\n\n      for (const lang of options.toLanguages) {\n        const langCode = getLanguageCode(lang)\n        const caption = result.translations.get(langCode)\n        captions.languages[langCode] = caption\n      }\n\n      await this._callback({\n        original: result.text,\n        translations: captions\n      })\n    }\n\n    function getLanguageCode(lang) {\n      return lang.substring(0, 2)\n    }\n  }\n  \n  stop() {\n    if (this._recognizer) {\n      this._recognizer.stopContinuousRecognitionAsync(\n        stopRecognizer.bind(this),\n        function (err) {\n          stopRecognizer().bind(this)\n          console.error(err)\n        }.bind(this)\n      )\n    }\n\n    function stopRecognizer() {\n      this._recognizer.close()\n      this._recognizer = undefined\n      console.log('stopped')\n    }\n  }\n}\n\nexport default Translator"]}]}