{"remainingRequest":"D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\src\\views\\CaptionJoin.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\src\\views\\CaptionJoin.vue","mtime":1606393365000},{"path":"D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9Qcm9taXNlIGZyb20gIkQ6XFxQcm9ncmFtXFxjYXB0aW9uXFxjYXB0aW9uci1zdGF0aWMtd2ViLWFwcC1tYWluICgxKVxcY2FwdGlvbnItc3RhdGljLXdlYi1hcHAtbWFpblxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczIvY29yZS1qcy9wcm9taXNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuZnVuY3Rpb24uYmluZCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6XFxQcm9ncmFtXFxjYXB0aW9uXFxjYXB0aW9uci1zdGF0aWMtd2ViLWFwcC1tYWluICgxKVxcY2FwdGlvbnItc3RhdGljLXdlYi1hcHAtbWFpblxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczIvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkuc29ydCI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IGNvbnN0YW50cyBmcm9tICcuLi9saWIvY29uc3RhbnRzJzsKaW1wb3J0ICogYXMgc2lnbmFsUiBmcm9tICdAbWljcm9zb2Z0L3NpZ25hbHInOwppbXBvcnQgbGFuZ3VhZ2VMaXN0TWl4aW4gZnJvbSAnLi4vbGliL2xhbmd1YWdlLWxpc3QtbWl4aW4nOwpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbbGFuZ3VhZ2VMaXN0TWl4aW5dLAogIHByb3BzOiB7CiAgICBjbGllbnRJZDogU3RyaW5nCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29kZTogJycsCiAgICAgIGNhcHRpb25zOiBbXSwKICAgICAgY2FwdGlvbnNNYXA6IHt9LAogICAgICB0b0xhbmd1YWdlQ29kZTogJ2VuJywKICAgICAgbWVldGluZ0lkOiBudWxsLAogICAgICBtZWV0aW5nUGFzc3dvcmQ6IG51bGwsCiAgICAgIGpvaW5lZDogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgdG9MYW5ndWFnZUNvZGVzOiBmdW5jdGlvbiB0b0xhbmd1YWdlQ29kZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLnRvTGFuZ3VhZ2VzLm1hcChmdW5jdGlvbiAobCkgewogICAgICAgIHJldHVybiBsLnN1YnN0cmluZygwLCAyKTsKICAgICAgfSkuc29ydCgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgam9pbjogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2pvaW4gPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBvbk5ld0NhcHRpb247CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgb25OZXdDYXB0aW9uID0gZnVuY3Rpb24gX3JlZihjYXB0aW9uKSB7CiAgICAgICAgICAgICAgICAgIHZhciBsb2NhbENhcHRpb24gPSB0aGlzLmNhcHRpb25zTWFwW2NhcHRpb24ub2Zmc2V0XTsKCiAgICAgICAgICAgICAgICAgIGlmICghbG9jYWxDYXB0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgbG9jYWxDYXB0aW9uID0gdGhpcy5jYXB0aW9uc01hcFtjYXB0aW9uLm9mZnNldF0gPSB7CiAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IGNhcHRpb24ub2Zmc2V0LAogICAgICAgICAgICAgICAgICAgICAgdGV4dDogJycKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHRoaXMuY2FwdGlvbnMucHVzaChsb2NhbENhcHRpb24pOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBsb2NhbENhcHRpb24udGV4dCA9IGNhcHRpb24udGV4dDsKICAgICAgICAgICAgICAgICAgVnVlLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBuZXcgc2lnbmFsUi5IdWJDb25uZWN0aW9uQnVpbGRlcigpLndpdGhVcmwoIiIuY29uY2F0KGNvbnN0YW50cy5hcGlCYXNlVXJsLCAiL2FwaS8iKS5jb25jYXQodGhpcy5jbGllbnRJZCwgIi8iKS5jb25jYXQodGhpcy5tZWV0aW5nSWQsICIvIikuY29uY2F0KHRoaXMubWVldGluZ1Bhc3N3b3JkKSkud2l0aEF1dG9tYXRpY1JlY29ubmVjdCgpLmJ1aWxkKCk7CiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24ub24oJ25ld0NhcHRpb24nLCBvbk5ld0NhcHRpb24uYmluZCh0aGlzKSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zdGFydCgpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDg7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDMpOwogICAgICAgICAgICAgICAgYWxlcnQoJ0Nvbm5lY3Rpb24gZmFpbGVkLiBWZXJpZnkgdGhlIG1lZXRpbmcgaWQgYW5kIHBhc3N3b3JkIGFuZCB0cnkgYWdhaW4uJyk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY29ubmVjdGlvbiBzdGFydGVkJyk7CiAgICAgICAgICAgICAgICB0aGlzLmpvaW5lZCA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVMYW5ndWFnZVN1YnNjcmlwdGlvbih0aGlzLnRvTGFuZ3VhZ2VDb2RlKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMsIFtbMywgOF1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gam9pbigpIHsKICAgICAgICByZXR1cm4gX2pvaW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGpvaW47CiAgICB9KCksCiAgICB1cGRhdGVMYW5ndWFnZVN1YnNjcmlwdGlvbjogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3VwZGF0ZUxhbmd1YWdlU3Vic2NyaXB0aW9uID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIobGFuZ3VhZ2VDb2RlKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCIiLmNvbmNhdChjb25zdGFudHMuYXBpQmFzZVVybCwgIi9hcGkvc2VsZWN0bGFuZ3VhZ2U/bWVldGluZ0lkPSIpLmNvbmNhdCh0aGlzLm1lZXRpbmdJZCksIHsKICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiBsYW5ndWFnZUNvZGUsCiAgICAgICAgICAgICAgICAgIHVzZXJJZDogdGhpcy5jbGllbnRJZAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZUxhbmd1YWdlU3Vic2NyaXB0aW9uKF94KSB7CiAgICAgICAgcmV0dXJuIF91cGRhdGVMYW5ndWFnZVN1YnNjcmlwdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gdXBkYXRlTGFuZ3VhZ2VTdWJzY3JpcHRpb247CiAgICB9KCkKICB9LAogIHdhdGNoOiB7CiAgICB0b0xhbmd1YWdlQ29kZTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUxhbmd1YWdlU3Vic2NyaXB0aW9uKHRoaXMudG9MYW5ndWFnZUNvZGUpOwogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLm1lZXRpbmdJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5tZWV0aW5nSWQ7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2JlZm9yZURlc3Ryb3kgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgIC8qI19fUFVSRV9fKi8KICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghdGhpcy5jb25uZWN0aW9uKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gX1Byb21pc2UuYWxsKFt0aGlzLmNvbm5lY3Rpb24uc3RvcCgpLCB0aGlzLnVwZGF0ZUxhbmd1YWdlU3Vic2NyaXB0aW9uKG51bGwpXSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Nvbm5lY3Rpb24gc3RvcHBlZCcpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgfSkpOwoKICAgIGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICAgIHJldHVybiBfYmVmb3JlRGVzdHJveS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIHJldHVybiBiZWZvcmVEZXN0cm95OwogIH0oKQp9Ow=="},{"version":3,"sources":["CaptionJoin.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"caption-join\">\n    <div v-if=\"!joined\">\n      <div><input type=\"password\" v-model=\"meetingPassword\" placeholder=\"Meeting Password\" /></div>\n      <button @click=\"join\">Join</button>\n    </div>\n    <div v-else>\n      <div id=\"language-select\">\n        <select v-model=\"toLanguageCode\">\n          <option v-for=\"lang in toLanguageCodes\" :value=\"lang\" :key=\"lang\">\n            {{ lang }}\n          </option>\n        </select>\n      </div>\n      <div id=\"captions-text\" class=\"caption\">\n        <div v-for=\"caption in captions\" :key=\"caption.offset\">{{ caption.text }}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport axios from 'axios'\nimport constants from '../lib/constants'\nimport * as signalR from '@microsoft/signalr'\nimport languageListMixin from '../lib/language-list-mixin'\n\nexport default {\n  mixins: [ languageListMixin ],\n  props: {\n    clientId: String\n  },\n  data() {\n    return {\n      code: '',\n      captions: [],\n      captionsMap: {},\n      toLanguageCode: 'en',\n      meetingId: null,\n      meetingPassword: null,\n      joined: false\n    }\n  },\n  computed: {\n    toLanguageCodes() {\n      return this.toLanguages.map(l => l.substring(0, 2)).sort()\n    }\n  },\n  methods: {\n    async join() {\n      this.connection = new signalR.HubConnectionBuilder()\n        .withUrl(`${constants.apiBaseUrl}/api/${this.clientId}/${this.meetingId}/${this.meetingPassword}`)\n        .withAutomaticReconnect()\n        .build()\n\n      this.connection.on('newCaption', onNewCaption.bind(this))\n\n      try {\n        await this.connection.start()\n      } catch (e) {\n        alert('Connection failed. Verify the meeting id and password and try again.')\n      }\n\n      console.log('connection started')\n      this.joined = true\n      await this.updateLanguageSubscription(this.toLanguageCode)\n\n      function onNewCaption(caption) {\n        let localCaption = this.captionsMap[caption.offset]\n        if (!localCaption) {\n          localCaption = this.captionsMap[caption.offset] = {\n            offset: caption.offset,\n            text: ''\n          }\n          this.captions.push(localCaption)\n        }\n        localCaption.text = caption.text\n\n        Vue.nextTick(function() {\n          window.scrollTo(0, document.body.scrollHeight || document.documentElement.scrollHeight)\n        })\n      }\n    },\n    async updateLanguageSubscription(languageCode) {        \n      await axios.post(`${constants.apiBaseUrl}/api/selectlanguage?meetingId=${this.meetingId}`, {\n        languageCode,\n        userId: this.clientId\n      })\n    }\n  },\n  watch: {\n    toLanguageCode: {\n      handler() {\n        return this.updateLanguageSubscription(this.toLanguageCode)\n      },\n      immediate: true\n    }\n  },\n  mounted() {\n    this.meetingId = this.$route.params.meetingId\n  },\n  async beforeDestroy() {\n    if (this.connection) {\n      await Promise.all([\n        this.connection.stop(),\n        this.updateLanguageSubscription(null)\n      ])\n      console.log('connection stopped')\n    }\n  }\n}\n</script>\n\n<style scoped>\n#language-select {\n  position: fixed;\n  top: 0;\n  width: 100%;\n  padding-top: 120px;\n  padding-bottom: 6px;\n  background-color: white;\n}\n\n#captions-text {\n  padding-top: 140px;\n  padding-bottom: 60px\n}\n</style>\n"],"sourceRoot":"src/views"}]}