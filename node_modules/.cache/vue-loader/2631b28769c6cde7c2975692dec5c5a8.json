{"remainingRequest":"D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\src\\views\\CaptionHost.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\src\\views\\CaptionHost.vue","mtime":1606393365000},{"path":"D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Program\\caption\\captionr-static-web-app-main (1)\\captionr-static-web-app-main\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IGNvbnN0YW50cyBmcm9tICcuLi9saWIvY29uc3RhbnRzJwppbXBvcnQgVHJhbnNsYXRvciBmcm9tICcuLi9saWIvdHJhbnNsYXRvcicKaW1wb3J0IGxhbmd1YWdlTGlzdE1peGluIGZyb20gJy4uL2xpYi9sYW5ndWFnZS1saXN0LW1peGluJwoKY29uc3Qgc3BlZWNoQXBpS2V5TG9jYWxTdG9yYWdlS2V5ID0gJ3NwZWVjaEFwaUtleScKY29uc3Qgc3BlZWNoQXBpUmVnaW9uU3RvcmFnZUtleSA9ICdzcGVlY2hBcGlSZWdpb24nCgpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbIGxhbmd1YWdlTGlzdE1peGluIF0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGtleTogd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKHNwZWVjaEFwaUtleUxvY2FsU3RvcmFnZUtleSkgfHwgJycsCiAgICAgIHJlZ2lvbjogd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKHNwZWVjaEFwaVJlZ2lvblN0b3JhZ2VLZXkpIHx8IGAke2NvbnN0YW50cy5yZWdpb259YCwKICAgICAgY3VycmVudFNlbnRlbmNlOiAnJywKICAgICAgc3RhcnRlZDogZmFsc2UsCiAgICAgIGZyb21MYW5ndWFnZTogJ2VuLVVTJywKICAgICAgbWVldGluZ0lkOiB0aGlzLiRyb3V0ZS5wYXJhbXMubWVldGluZ0lkLAogICAgICBob3N0S2V5OiB0aGlzLiRyb3V0ZS5wYXJhbXMuaG9zdEtleSwKICAgICAgYXV0aFRva2VuOiBudWxsLAogICAgICBtZWV0aW5nUGFzc3dvcmQ6IG51bGwsCiAgICAgIG9yaWdpbjogbnVsbAogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGtleShuZXdLZXkpIHsKICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKHNwZWVjaEFwaUtleUxvY2FsU3RvcmFnZUtleSwgbmV3S2V5KQogICAgfSwKICAgIHJlZ2lvbihuZXdSZWdpb24pIHsKICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKHNwZWVjaEFwaVJlZ2lvblN0b3JhZ2VLZXksIG5ld1JlZ2lvbikKICAgIH0KICB9LAogIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnRyYW5zbGF0b3IgPSBuZXcgVHJhbnNsYXRvcihmdW5jdGlvbihjYXB0aW9ucykgewogICAgICB0aGlzLmN1cnJlbnRTZW50ZW5jZSA9IGNhcHRpb25zLm9yaWdpbmFsCiAgICAgIGNvbnN0IHRyYW5zbGF0aW9ucyA9IE9iamVjdC5hc3NpZ24oewogICAgICAgIHRva2VuOiB0aGlzLmF1dGhUb2tlbgogICAgICB9LCBjYXB0aW9ucy50cmFuc2xhdGlvbnMpCiAgICAgIGF4aW9zLnBvc3QoYCR7Y29uc3RhbnRzLmFwaUJhc2VVcmx9L2FwaS9jYXB0aW9ucz9tZWV0aW5nSWQ9JHt0aGlzLm1lZXRpbmdJZH1gLCB0cmFuc2xhdGlvbnMpCiAgICB9LmJpbmQodGhpcykpCgogICAgY29uc3QgYXV0aCA9IGF3YWl0IGF4aW9zLnBvc3QoYCR7Y29uc3RhbnRzLmFwaUJhc2VVcmx9L2FwaS90b2tlbnMvaG9zdGAsIHsKICAgICAgbWVldGluZ0lkOiB0aGlzLm1lZXRpbmdJZCwKICAgICAgaG9zdEtleTogdGhpcy5ob3N0S2V5CiAgICB9KS50aGVuKHIgPT4gci5kYXRhKQoKICAgIHRoaXMuYXV0aFRva2VuID0gYXV0aC50b2tlbgogICAgdGhpcy5tZWV0aW5nUGFzc3dvcmQgPSBhdXRoLm1lZXRpbmcubWVldGluZ1Bhc3N3b3JkCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5vcmlnaW4gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luCiAgfSwKICBtZXRob2RzOiB7CiAgICBzdGFydCgpIHsKICAgICAgdGhpcy50cmFuc2xhdG9yLnN0YXJ0KHsKICAgICAgICBrZXk6IHRoaXMua2V5LAogICAgICAgIHJlZ2lvbjogdGhpcy5yZWdpb24sCiAgICAgICAgZnJvbUxhbmd1YWdlOiB0aGlzLmZyb21MYW5ndWFnZSwKICAgICAgICB0b0xhbmd1YWdlczogdGhpcy50b0xhbmd1YWdlcwogICAgICB9KQogICAgICBjb25zb2xlLmxvZyh0aGlzLm1lZXRpbmdJZCwgdGhpcy5ob3N0S2V5KQogICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlCiAgICB9LAogICAgc3RvcCgpIHsKICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2UKICAgICAgdGhpcy5jdXJyZW50U2VudGVuY2UgPSAnJwogICAgICB0aGlzLnRyYW5zbGF0b3Iuc3RvcCgpCiAgICB9CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy50cmFuc2xhdG9yLnN0b3AoKQogIH0KfQo="},{"version":3,"sources":["CaptionHost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CaptionHost.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"caption-host\">\n    <div>\n      <div>Meeting join link: <code>{{ `${origin}/join/${meetingId}` }}</code></div>\n      <div>Meeting password: <code>{{ meetingPassword }}</code></div>\n    </div>\n    <div v-if=\"!started\">\n      <h1>Host a session</h1>\n      <div><input type=\"password\" v-model=\"key\" placeholder=\"Cognitive Services Speech API Key\" /></div>\n      <div>\n        <input type=\"text\" v-model=\"region\" placeholder=\"Speech API region\" />\n        <select v-model=\"fromLanguage\">\n          <option v-for=\"lang in fromLanguages\" :value=\"lang\" :key=\"lang\">\n            {{ lang }}\n          </option>\n        </select>\n        <button @click=\"start\">start</button>\n      </div>\n    </div>\n    <div v-else>\n      <button @click=\"stop\">stop</button>\n      <div id=\"currentSentence\" class=\"caption\">\n        {{ currentSentence }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport constants from '../lib/constants'\nimport Translator from '../lib/translator'\nimport languageListMixin from '../lib/language-list-mixin'\n\nconst speechApiKeyLocalStorageKey = 'speechApiKey'\nconst speechApiRegionStorageKey = 'speechApiRegion'\n\nexport default {\n  mixins: [ languageListMixin ],\n  data() {\n    return {\n      key: window.localStorage.getItem(speechApiKeyLocalStorageKey) || '',\n      region: window.localStorage.getItem(speechApiRegionStorageKey) || `${constants.region}`,\n      currentSentence: '',\n      started: false,\n      fromLanguage: 'en-US',\n      meetingId: this.$route.params.meetingId,\n      hostKey: this.$route.params.hostKey,\n      authToken: null,\n      meetingPassword: null,\n      origin: null\n    }\n  },\n  watch: {\n    key(newKey) {\n      window.localStorage.setItem(speechApiKeyLocalStorageKey, newKey)\n    },\n    region(newRegion) {\n      window.localStorage.setItem(speechApiRegionStorageKey, newRegion)\n    }\n  },\n  async created() {\n    this.translator = new Translator(function(captions) {\n      this.currentSentence = captions.original\n      const translations = Object.assign({\n        token: this.authToken\n      }, captions.translations)\n      axios.post(`${constants.apiBaseUrl}/api/captions?meetingId=${this.meetingId}`, translations)\n    }.bind(this))\n\n    const auth = await axios.post(`${constants.apiBaseUrl}/api/tokens/host`, {\n      meetingId: this.meetingId,\n      hostKey: this.hostKey\n    }).then(r => r.data)\n\n    this.authToken = auth.token\n    this.meetingPassword = auth.meeting.meetingPassword\n  },\n  mounted() {\n    this.origin = window.location.origin\n  },\n  methods: {\n    start() {\n      this.translator.start({\n        key: this.key,\n        region: this.region,\n        fromLanguage: this.fromLanguage,\n        toLanguages: this.toLanguages\n      })\n      console.log(this.meetingId, this.hostKey)\n      this.started = true\n    },\n    stop() {\n      this.started = false\n      this.currentSentence = ''\n      this.translator.stop()\n    }\n  },\n  beforeDestroy() {\n    this.translator.stop()\n  }\n}\n</script>\n\n<style scoped>\ninput[type=password] {\n  width: 600px;\n}\n</style>"]}]}